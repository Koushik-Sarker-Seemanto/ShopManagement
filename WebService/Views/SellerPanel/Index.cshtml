@{
    ViewData["Title"] = "Seller Index";
    Layout = "_LayoutSeller";
}
<div style="text-align: center; margin-top: 1%;margin-bottom: 2%">
    
    <h3>Purchase Counter</h3>
</div>
<div class="row">
    <div class="col-8"style="margin-top: 5%">
    
        <div class="col-4" style="margin-top: 2%;margin-bottom: 1%">
            <input style="border: 2px solid black;margin-left: -5%" class="form-control" placeholder="Product Id" id="inbox" />
        </div>

    </div>
    <div class="col-1"></div>
    <div class="col-3" style="padding: 1%; text-align: left" >
        <div class="col-12">
            <input style="border: 2px solid black; margin-top:3%" class="form-control" placeholder="Customer Name" id="name" />
            <input style="border: 2px solid black;margin-top: 2%" class="form-control" placeholder="Phone Number" id="phone" />

        </div>
        

    </div>

</div>
@{
    await Html.RenderPartialAsync("_ProductTable");
}
<div class="row">
    <div class="col-11"></div>
    <div class="form-check" style="align-items: flex-end">
        <input type="checkbox" style="color:red" class="form-check-input" id="due">
        <label class="form-check-label" style="color:red" for="due">Due Bill</label>
    </div>

</div>
<div style="text-align: center">
    <button class="btn btn-success" id="checkout"> Checkout </button>
</div>


<script>
    var total = 0.00;
    var array = [];
    $('#inbox').keyup(function(e) {
        if (e.keyCode == 13) {
            //your code
            var str = $("#inbox").val();

            $.ajax({
                type: "GET",
                url: '@Url.Action("GetProduct", "SellerPanel")',
                contentType: "application/json; charset=utf-8",
                data: {
                    //Passing Input parameter
                    id: $('#inbox').val()
                },
                success: function (response) {
                    var json_response = JSON.stringify(response);

                    $('#inbox').val('');
                    if (response.status === "Not Found") {
                        alert("Product Not Found");
                    } else {
                        total  = (parseFloat(total) + parseFloat(response.res.sellingPrice)).toFixed(1);
                        var trHTML = '';
                        trHTML += '<tr class="text-center"><td>' + response.res.productTitle + '</td><td>' + response.res.sellingPrice + '</td><td><a href="javascript: removeTable(3dc2b2eb - 6194 - 440e-8474 - f8a4aeceb6fb) " value="Delete" type="button" alt="Delete6" class="deleteIcon fa fa-trash"></i></td></tr>';
                        $('#sellerDataTable').append(trHTML);
                        array.push(response.res.id);
                        $('#total').html(total.toString());
                    }
                },
                error: function (response) {
                    alert(response);
                }
            });
        }
    });


    $('#discount').keyup(function(e) {
        if (e.keyCode == 13) {
            total = (parseFloat(total) - parseFloat($("#discount").val())).toFixed(1);
            $('#total').html(total.toString());
        }
    });

    function removeTable(id) {
        alert(id);
    }

    $('#checkout').click(function () {

        var data = {
            name: $('#name').val(),
            phone: $('#phone').val(),
            order: array
        }
        console.log(array.length);
        var due = "";
        var checkBox = document.getElementById("due");
        if (checkBox.checked === true) {
            due = "Due";
        } else {
            due = "Paid";
        }
        
        $.ajax({
            type: "POST",
            url: '@Url.Action("SellProduct", "SellerPanel")',
            datatype: "json",
            data: {
                //Passing Input parameter
                name: $('#name').val(),
                phone: $('#phone').val(),
                pay: due,
                total : total,
                order: JSON.stringify(array)
            },
            success: function (response) {
                if (response.status === "Ok") {
                    alert("OK");
                } else {
                    alert("Fail");
                }
            },
            error: function (response) {
                alert("Fail Req");
            }
        });
    });

</script>